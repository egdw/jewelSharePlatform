<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<meta name="viewport" content="user-scalable=no"/>
<head>
    <title>你们</title>
    <link rel="stylesheet" type="text/css" th:href="@{user/css/yours.css}">
</head>
<body id="mainBody"  onload="clickhandle(2)">
<div class="head">
    <div class="imgchangediv">
        <div class="swiper-container" style="width: 100%;height: 100%">
            <div class="swiper-wrapper">

                <div class="swiper-slide" th:each="banner:${banners}"><a
                        th:href="${'/jewel/detail?pageId='+banner.pointUrl}"><img class="swiper-slide"
                                                                                  th:src="'/jewel/upload/'+${banner.imgUrl}"/></a>
                </div>
                <!--<div class="swiper-slide">Slide 3</div>-->
            </div>
            <!-- 如果需要分页器 -->
            <div class="swiper-pagination" style="color: #2f2f2f "></div>

            <!-- 如果需要导航按钮 -->
            <!--<div class="swiper-button-prev"></div>-->
            <!--<div class="swiper-button-next"></div>-->

            <!-- 如果需要滚动条 -->
            <!--<div class="swiper-scrollbar"></div>-->
        </div>

    </div>


    <ul class="navigation" id="nav">
        <li class="memoir">
            <a href="/jewel/memorize"><img th:src="@{user/yours/img/memoir.png}"><span>回忆录</span></a>
        </li>
        <li class="talk">
            <img th:src="@{user/yours/img/talk.png}" alt=""><span>我想对你说</span>
        </li>
        <li class="mondaybest">
            <a href="/jewel/best"><img th:src="@{user/yours/img/mondaybest.png}"><span>周一最佳</span></a>
        </li>
    </ul>
</div>
<div class="foot">
    <ul class="background">
        <li class="you">
            <a href="/jewel/" style="text-decoration: none;color: #74B0CC">你们</a>
        </li>
        <a href="write" target="_top">
            <li class="release">
                <img th:src="@{user/yours/img/footimg.png}" alt="">
            </li>
        </a>
        <li class="me">
            <a href="/jewel/me_message" style="text-decoration: none;color: #0f0f0f">我的</a>
        </li>
    </ul>
</div>
<!--<h1 th:text="${pages}">这是测试内容</h1>-->
<!--<ul class="contents" th:each="page:${pages}">-->
<ul class="contents">

    <!--<li class="women" th:if="${page.user.boy == false}">-->
    <!--<div class="c-head">-->
    <!--&lt;!&ndash;<img th:src="@{user/yours/img/anonymous-head.png}">&ndash;&gt;-->
    <!--<img th:src="${page.user.imgUrl}">-->
    <!--<div class="name" th:text="${page.user.name}">用户名</div>-->
    <!--<div class="dot"></div>-->
    <!--</div>-->
    <!--&lt;!&ndash;<div class="imgchangediv">&ndash;&gt;-->
    <!--&lt;!&ndash;<img th:src="@{user/yours/img/img1.png}" style="display: block;"/>&ndash;&gt;-->
    <!--&lt;!&ndash;<img th:src="@{user/yours/img/img2.png}" style="display: none;"/>&ndash;&gt;-->
    <!--&lt;!&ndash;<img th:src="@{user/yours/img/img3.png}" style="display: none;"/>&ndash;&gt;-->
    <!--&lt;!&ndash;<div class="imgyuan">&ndash;&gt;-->
    <!--&lt;!&ndash;<font></font>&ndash;&gt;-->
    <!--&lt;!&ndash;<font></font>&ndash;&gt;-->
    <!--&lt;!&ndash;<font></font>&ndash;&gt;-->
    <!--&lt;!&ndash;</div>&ndash;&gt;-->
    <!--&lt;!&ndash;</div>&ndash;&gt;-->
    <!--<div class="photo"-->
    <!--th:if="${page.imgUrl != null && page.imgUrl.size()>0 && (page.hidden == null || page.hidden == false)}">-->
    <!--&lt;!&ndash;<img/>&ndash;&gt;-->
    <!--<img th:src="'/jewel/upload/'+${page.imgUrl[0]}">-->
    <!--&lt;!&ndash;<img th:src="'/jewel/upload/'+${page.imgUrl[0]}" th:each="img:${page.imgUrl}">&ndash;&gt;-->
    <!--&lt;!&ndash;<div class="number" th:text="'1/'+${page.imgUrl.size()}">1/9</div>&ndash;&gt;-->
    <!--</div>-->
    <!--<div class="c-text">-->
    <!--<a style="text-decoration: none;color: #0f0f0f" th:href="'/jewel/detail?pageId='+${page._id}"-->
    <!--th:text="${page.text}">文字文字文字纯文字排版背景灰色字体变细匿名用户</a>-->
    <!--</div>-->
    <!--<div class="c-foot">-->
    <!--<span th:text="${page.likes.length+'赞'+'  '+page.talks.size()+'评论'}"-->
    <!--th:if="${page.talks != null && page.likes !=null}">785赞&nbsp;·&nbsp;182 评论</span>-->
    <!--<span th:text="${page.likes.length+'赞'+'  '+'0评论'}" th:if="${page.talks == null && page.likes !=null}">785赞&nbsp;·&nbsp;182 评论</span>-->
    <!--<span th:text="${'0赞'+'  '+page.talks.size()+'评论'}" th:if="${page.talks != null && page.likes ==null}">785赞&nbsp;·&nbsp;182 评论</span>-->
    <!--<span th:text="${'0赞'+'  '+'0评论'}" th:if="${page.talks == null  && page.likes ==null}">785赞&nbsp;·&nbsp;182 评论</span>-->
    <!--<a href=""><img th:src="@{user/yours/img/forward.png}"></a>-->
    <!--<a href=""><img th:src="@{user/yours/img/comment.png}"></a>-->
    <!--&lt;!&ndash;<p th:text="${page.liked}"></p>&ndash;&gt;-->
    <!--<a href="#" onclick="" th:if="${page.liked == null || page.liked == false}"><img-->
    <!--th:src="@{user/yours/img/like.png}"></a>-->
    <!--<a href="#" onclick="" th:if="${page.liked != null && page.liked == true}"><img-->
    <!--th:src="@{user/yours/img/s-like.png}"></a>-->
    <!--</div>-->
    <!--</li>-->
    <!--&lt;!&ndash;<li class="women">&ndash;&gt;-->
    <!--&lt;!&ndash;<div class="c-head">&ndash;&gt;-->
    <!--&lt;!&ndash;<img th:src="@{user/yours/img/anonymous-head.png}">&ndash;&gt;-->
    <!--&lt;!&ndash;<div class="name">用户名</div>&ndash;&gt;-->
    <!--&lt;!&ndash;<div class="dot"></div>&ndash;&gt;-->
    <!--&lt;!&ndash;</div>&ndash;&gt;-->
    <!--&lt;!&ndash;<div class="photo">&ndash;&gt;-->
    <!--&lt;!&ndash;<img src="">&ndash;&gt;-->
    <!--&lt;!&ndash;<div class="number">1/9</div>&ndash;&gt;-->
    <!--&lt;!&ndash;</div>&ndash;&gt;-->
    <!--&lt;!&ndash;<div class="c-text">&ndash;&gt;-->
    <!--&lt;!&ndash;<p>文字文字文字纯文字排版背景灰色字体变细匿名用户</p>&ndash;&gt;-->
    <!--&lt;!&ndash;</div>&ndash;&gt;-->
    <!--&lt;!&ndash;<div class="c-foot">&ndash;&gt;-->
    <!--&lt;!&ndash;<span>785赞&nbsp;·&nbsp;182 评论</span>&ndash;&gt;-->
    <!--&lt;!&ndash;<a href=""><img th:src="@{user/yours/img/like.png}"></a>&ndash;&gt;-->
    <!--&lt;!&ndash;<a href=""><img th:src="@{user/yours/img/comment.png}"></a>&ndash;&gt;-->
    <!--&lt;!&ndash;<a href=""><img th:src="@{user/yours/img/forward.png}"></a>&ndash;&gt;-->
    <!--&lt;!&ndash;</div>&ndash;&gt;-->
    <!--&lt;!&ndash;</li>&ndash;&gt;-->
    <!--<li class="men" th:if="${page.user.boy == true && (page.hidden == null || page.hidden == false)}">-->
    <!--<div class="c-head">-->
    <!--&lt;!&ndash;<img th:src="@{user/yours/img/anonymous-head.png}">&ndash;&gt;-->
    <!--<img th:src="${page.user.imgUrl}">-->
    <!--<div class="name" th:text="${page.user.name}">用户名</div>-->
    <!--<div class="dot"></div>-->
    <!--</div>-->
    <!--<div class="photo" th:if="${page.imgUrl != null && page.imgUrl.size()>0}">-->
    <!--<img th:src="'/jewel/upload/'+${page.imgUrl[0]}">-->
    <!--&lt;!&ndash;<div class="number" th:text="'1/'+${page.imgUrl.size()}">1/9</div>&ndash;&gt;-->
    <!--</div>-->
    <!--<div class="c-text">-->
    <!--<a style="text-decoration: none;color: #0f0f0f" th:href="'/jewel/detail?pageId='+${page._id}"-->
    <!--th:text="${page.text}">文字文字文字纯文字排版背景灰色字体变细匿名用户</a>-->
    <!--</div>-->
    <!--<div class="c-foot">-->
    <!--<span th:text="${page.likes.length+'赞'+'  '+page.talks.size()+'评论'}"-->
    <!--th:if="${page.talks != null && page.likes !=null}">785赞&nbsp;·&nbsp;182 评论</span>-->
    <!--<span th:text="${page.likes.length+'赞'+'  '+'0评论'}" th:if="${page.talks == null && page.likes !=null}">785赞&nbsp;·&nbsp;182 评论</span>-->
    <!--<span th:text="${'0赞'+'  '+page.talks.size()+'评论'}" th:if="${page.talks != null && page.likes ==null}">785赞&nbsp;·&nbsp;182 评论</span>-->
    <!--<span th:text="${'0赞'+'  '+'0评论'}" th:if="${page.talks == null  && page.likes ==null}">785赞&nbsp;·&nbsp;182 评论</span>-->
    <!--&lt;!&ndash;<span>785赞&nbsp;·&nbsp;182 评论</span>&ndash;&gt;-->
    <!--<a href=""><img th:src="@{user/yours/img/forward.png}"></a>-->
    <!--<a href=""><img th:src="@{user/yours/img/comment.png}"></a>-->
    <!--<a href=""><img th:src="@{user/yours/img/like.png}"></a>-->
    <!--</div>-->
    <!--</li>-->

    <!--<li class="anonymous" th:if="${page.hidden != null && page.hidden == true}">-->
    <!--<div class="c-head">-->
    <!--<img th:src="@{user/yours/img/anonymous-head.png}">-->
    <!--<div class="name">匿名</div>-->
    <!--<div class="dot"></div>-->
    <!--</div>-->
    <!--<div class="photo" th:if="${page.imgUrl != null && page.imgUrl.size()>0} ">-->
    <!--<img th:src="'/jewel/upload/'+${page.imgUrl[0]}">-->
    <!--&lt;!&ndash;<div class="number" th:text="'1/'+${page.imgUrl.size()}">1/9</div>&ndash;&gt;-->
    <!--</div>-->
    <!--<div class="c-text">-->
    <!--<a style="text-decoration: none;color: #0f0f0f" th:href="'/jewel/detail?pageId='+${page._id}"-->
    <!--th:text="${page.text}">文字文字文字纯文字排版背景灰色字体变细匿名用户</a>-->
    <!--</div>-->
    <!--<div class="c-foot">-->
    <!--<span th:text="${page.likes.length+'赞'+'  '+page.talks.size()+'评论'}"-->
    <!--th:if="${page.talks != null && page.likes !=null}">785赞&nbsp;·&nbsp;182 评论</span>-->
    <!--<span th:text="${page.likes.length+'赞'+'  '+'0评论'}" th:if="${page.talks == null && page.likes !=null}">785赞&nbsp;·&nbsp;182 评论</span>-->
    <!--<span th:text="${'0赞'+'  '+page.talks.size()+'评论'}" th:if="${page.talks != null && page.likes ==null}">785赞&nbsp;·&nbsp;182 评论</span>-->
    <!--<span th:text="${'0赞'+'  '+'0评论'}" th:if="${page.talks == null  && page.likes ==null}">785赞&nbsp;·&nbsp;182 评论</span>-->
    <!--&lt;!&ndash;<span>785赞&nbsp;·&nbsp;182 评论</span>&ndash;&gt;-->
    <!--<a href=""><img th:src="@{user/yours/img/forward.png}"></a>-->
    <!--<a href=""><img th:src="@{user/yours/img/comment.png}"></a>-->
    <a href=""><img th:src="@{user/yours/img/like.png}" alt="7213123hdhasdasdi21213"></a>
    <!--</div>-->
    <!--</li>-->
</ul>
</body>

<style>
    .swiper-pagination-bullet {
        background: #6f6f6f;
    }

    .swiper-pagination-bullet-active {
        background: #2f2f2f;
    }
</style>
<script>
    var swiper = new Swiper('.swiper-container', {
        spaceBetween: 30,
        centeredSlides: true,
        autoplay: {
            delay: 2500,
            disableOnInteraction: false,
        },
        pagination: {
            el: '.swiper-pagination',
            clickable: true,
        },
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
        },
    });
</script>
<script>
    function liked(obj) {
        console.log("点击了." + obj)
        console.log(obj.text())
    }

    function findAllBanner() {
        $.ajax({
            url: '/jewel/banner/findAll',
            type: 'GET', //GET
            async: true,    //或false,是否异步
            timeout: 5000,    //超时时间
            dataType: 'json',    //返回的数据格式：json/xml/html/script/jsonp/text
            success: function (data, textStatus, jqXHR) {
                add(data)

            }
        })
    }

    $(document).ready(function () {
        findPage()
        // findAllBanner()
    });
    $(window).scroll(function () {
        var scrollTop = $(this).scrollTop();
        var scrollHeight = $(document).height();
        var scrollHeight = $(document).height();
        var windowHeight = $(this).height();
        // console.log("scrollTop:"+scrollTop)
        // console.log("windowHeight:"+windowHeight)
        // console.log("scrollHeight:"+scrollHeight)
        // console.log("scrollTop + windowHeight:"+(scrollTop + windowHeight))
        if (scrollTop + windowHeight >= (scrollHeight - 100)) {
            console.log("到达了底部..")
            findPage();
            // $.ajax({
            //     url: '/jewel/page/index',
            //     type: 'GET', //GET
            //     async: true,    //或false,是否异步
            //     timeout: 5000,    //超时时间
            //     dataType: 'json',    //返回的数据格式：json/xml/html/script/jsonp/text
            //     success: function (data, textStatus, jqXHR) {
            //         // var /L= scrollTop + windowHeight
            //         console.log(data)
            //         add(data)
            //         // $('html, body').animate({
            //         //     scrollTop: L
            //         // }, 100);
            //         console.log(textStatus)
            //         console.log(jqXHR)
            //     }
            // })
        }
    });

    function findPage() {
        $.ajax({
            url: '/jewel/page/index',
            type: 'GET', //GET
            async: true,    //或false,是否异步
            timeout: 5000,    //超时时间
            dataType: 'json',    //返回的数据格式：json/xml/html/script/jsonp/text
            success: function (data, textStatus, jqXHR) {
                // var /L= scrollTop + windowHeight
                console.log(data)
                add(data)
                // $('html, body').animate({
                //     scrollTop: L
                // }, 100);
                console.log(textStatus)
                console.log(jqXHR)
            }
        })
    }

    function add(data) {
        //是不是男性
        var isBoy = data[0].user.boy;
        //是否是隐藏
        var isHidden = data[0].hidden;
        // data[0]
        console.log(isBoy)
        console.log(isHidden)
        $.each(data, function (index, content) {
            var len = 0
            if (content.imgUrl != undefined) {
                len = content.imgUrl.length;
            }
            var likeLen = 0;
            if (content.likes != undefined) {
                likeLen = content.likes.length
            }
            if (isHidden == true) {
                console.log("是隐藏的样式")
                // var talkLen = content.
                if (len > 0) {
                    $("#mainBody").append(" <ul class=\"contents\" ><li class='anonymous'>" +
                        "<div class='c-head'>" + "<img src='" + content.user.imgUrl + "'>" + "<div class='name'>匿名</div>" +
                        "<div class='dot'></div>" + "</div>" + " <div class='photo'>" + " <img th:src='" + "/jewel/upload/" + content.imgUrl[0] + "'>" + "</div>" +
                        "<div class='c-text'>" + "<a style=\"text-decoration: none;color: #0f0f0f\" href='+" + "/jewel/detail?pageId=" + content.id + "'> " + content.text + "</a>" + "</div>" +
                        "<div class='c-foot'>" + " <span>785赞&nbsp;·&nbsp;182 评论</span>" +
                        "<a href='#'><img src='user/yours/img/forward.png'></a>" +
                        "<a href=''><img src='user/yours/img/comment.png'></a>" +
                        "<a href='javascript:void(0)' onclick='liked(this)'><img alt='like' src='user/yours/img/like.png'></a>"


                        + "</div>" +
                        "</li></ul>");
                } else {
                    $("#mainBody").append("<ul class=\"contents\" > <li class='anonymous'>" +
                        "<div class='c-head'>" + "<img src='" + content.user.imgUrl + "'>" + "<div class='name'>匿名</div>" +
                        "<div class='dot'></div>"
                        + "</div>" + "<div class='c-text'>" + "<a style=\"text-decoration: none;color: #0f0f0f\" href='+" + "/jewel/detail?pageId=" + content.id + "'> " + content.text + "</a>" + "</div>" +
                        "<div class='c-foot'>" + " <span>785赞&nbsp;·&nbsp;182 评论</span>" +
                        "<a href=''><img src='user/yours/img/forward.png'></a>" +
                        "<a href=''><img src='user/yours/img/comment.png'></a>" +
                        "<a href='javascript:void(0)' onclick='liked(this)'><img src='user/yours/img/like.png'></a>" +
                        "</div>" +
                        "</li></ul>");
                }
            } else {
                if (isBoy == true) {
                    console.log("是男孩")
                    if (len > 0) {
                        $("#mainBody").append(" <ul class=\"contents\" ><li class='men'>" +
                            "<div class='c-head'>" + "<img src='" + content.user.imgUrl + "'>" + "<div class='name'>匿名</div>" +
                            "<div class='dot'></div>" + "</div>" + " <div class='photo'>" + " <img th:src='" + "/jewel/upload/" + content.imgUrl[0] + "'>" + "</div>" +
                            "<div class='c-text'>" + "<a style=\"text-decoration: none;color: #0f0f0f\" href='+" + "/jewel/detail?pageId=" + content.id + "'> " + content.text + "</a>" + "</div>" +
                            "<div class='c-foot'>" + " <span>785赞&nbsp;·&nbsp;182 评论</span>" + "<a href=''><img src='user/yours/img/forward.png'></a>" +
                            "<a href=''><img src='user/yours/img/comment.png'></a>" +
                            "<a href='javascript:void(0)' onclick='liked(this)'><img src='user/yours/img/like.png'></a>" + "</div>" +
                            "</li></ul>");

                        // <a style="text-decoration: none;color: #0f0f0f" th:href="'/jewel/detail?pageId='+${page._id}" th:text="${page.text}">文字文字文字纯文字排版背景灰色字体变细匿名用户</a>

                    } else {
                        $("#mainBody").append("<ul class=\"contents\" > <li class='men'>" +
                            "<div class='c-head'>" + "<img src='" + content.user.imgUrl + "'>" + "<div class='name'>匿名</div>" +
                            "<div class='dot'></div>"
                            + "</div>" + "<div class='c-text'>" + "<a style=\"text-decoration: none;color: #0f0f0f\" href='+" + "/jewel/detail?pageId=" + content.id + "'> " + content.text + "</a>" + "</div>" +
                            "<div class='c-foot'>" + " <span>785赞&nbsp;·&nbsp;182 评论</span>" + "<a href=''><img src='user/yours/img/forward.png'></a>" +
                            "<a href=''><img src='user/yours/img/comment.png'></a>" +
                            "<a href='javascript:void(0)' onclick='liked(this)'><img src='user/yours/img/like.png'></a>" + "</div>" +
                            "</li></ul>");
                    }
                }

                if (isBoy == false) {
                    console.log(("是女孩"))
                    if (len > 0) {
                        $("#mainBody").append(" <ul class=\"contents\" ><li class='women'>" +
                            "<div class='c-head'>" + "<img src='" + content.user.imgUrl + "'>" + "<div class='name'>匿名</div>" +
                            "<div class='dot'></div>" + "</div>" + " <div class='photo'>" + " <img th:src='" + "/jewel/upload/" + content.imgUrl[0] + "'>" + "</div>" +
                            "<div class='c-text'>" + "<a style=\"text-decoration: none;color: #0f0f0f\" href='+" + "/jewel/detail?pageId=" + content.id + "'> " + content.text + "</a>" + "</div>" +
                            "<div class='c-foot'>" + " <span>785赞&nbsp;·&nbsp;182 评论</span>" + "<a href=''><img src='user/yours/img/forward.png'></a>" +
                            "<a href=''><img src='user/yours/img/comment.png'></a>" +
                            "<a href='javascript:void(0)' onclick='liked(this)'><img src='user/yours/img/like.png'></a>" + "</div>" +
                            "</li></ul>");
                    } else {
                        $("#mainBody").append("<ul class=\"contents\" > <li class='women'>" +
                            "<div class='c-head'>" + "<img src='" + content.user.imgUrl + "'>" + "<div class='name'>匿名</div>" +
                            "<div class='dot'></div>"
                            + "</div>" + "<div class='c-text'>" + "<a style=\"text-decoration: none;color: #0f0f0f\" href='+" + "/jewel/detail?pageId=" + content.id + "'> " + content.text + "</a>" + "</div>" +
                            "<div class='c-foot'>" + " <span>785赞&nbsp;·&nbsp;182 评论</span>" + "<a href=''><img src='user/yours/img/forward.png'></a>" +
                            "<a href=''><img src='user/yours/img/comment.png'></a>" +
                            "<a href='javascript:void(0)' onclick='liked(this)'><img src='user/yours/img/like.png'></a>" + "</div>" +
                            "</li></ul>");
                    }
                }
            }
        })

    }
</script>

</html>