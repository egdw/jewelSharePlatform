<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<meta name="viewport" content="user-scalable=no"/>
<head>
    <title>你们</title>
    <link rel="stylesheet" type="text/css" th:href="@{user/css/yours.css}">
</head>
<body id="mainBody" onload="clickhandle(2)">
<div class="head">
    <div class="imgchangediv">
        <div class="swiper-container" style="width: 100%;height: 100%">
            <div class="swiper-wrapper">
                <div class="swiper-slide" th:each="banner:${banners}"><a
                        th:href="${'/jewel/detail?pageId='+banner.pointUrl}"><img class="swiper-slide"
                                                                                  th:src="'/jewel/upload/'+${banner.imgUrl}"/></a>
                </div>
            </div>
            <!-- 如果需要分页器 -->
            <div class="swiper-pagination" style="color: #2f2f2f "></div>
        </div>

    </div>


    <ul class="navigation" id="nav">
        <li class="memoir">
            <a href="/jewel/memorize"><img th:src="@{user/yours/img/memoir.png}"><span>回忆录</span></a>
        </li>
        <li class="talk">
            <img th:src="@{user/yours/img/talk.png}" alt=""><span>我想对你说</span>
        </li>
        <li class="mondaybest">
            <a href="/jewel/best"><img th:src="@{user/yours/img/mondaybest.png}"><span>周一最佳</span></a>
        </li>
    </ul>
</div>
<div class="foot">
    <ul class="background">
        <li class="you">
            <a href="/jewel/" style="text-decoration: none;color: #74B0CC">你们</a>
        </li>
        <a href="write" target="_top">
            <li class="release">
                <img th:src="@{user/yours/img/footimg.png}" alt="">
            </li>
        </a>
        <li class="me">
            <a href="/jewel/me_message" style="text-decoration: none;color: #0f0f0f">我的</a>
        </li>
    </ul>
</div>
<ul class="contents">

</ul>
</body>

<style>
    .swiper-pagination-bullet {
        background: #6f6f6f;
    }

    .swiper-pagination-bullet-active {
        background: #2f2f2f;
    }
</style>
<script>
    var swiper = new Swiper('.swiper-container', {
        spaceBetween: 30,
        centeredSlides: true,
        autoplay: {
            delay: 2500,
            disableOnInteraction: false,
        },
        pagination: {
            el: '.swiper-pagination',
            clickable: true,
        },
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
        },
    });
</script>
<script>
    function findAllBanner() {
        $.ajax({
            url: '/jewel/banner/findAll',
            type: 'GET', //GET
            async: true,    //或false,是否异步
            timeout: 5000,    //超时时间
            dataType: 'json',    //返回的数据格式：json/xml/html/script/jsonp/text
            success: function (data, textStatus, jqXHR) {
                add(data)

            }
        })
    }

    $(document).ready(function () {
        findPage()
        //
        // $.ajax({
        //     url: '/jewel/sign',
        //     type: 'GET', //GET
        //     async: true,    //或false,是否异步
        //     timeout: 5000,    //超时时间
        //     dataType: 'json',    //返回的数据格式：json/xml/html/script/jsonp/text
        //     success: function (data, textStatus, jqXHR) {
        //         console.log(data)
        //         wx.config({
        //             debug: true, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
        //             appId: 'wx04d5544324fa686e', // 必填，公众号的唯一标识
        //             timestamp: data.timestamp, // 必填，生成签名的时间戳
        //             nonceStr: data.nonce, // 必填，生成签名的随机串
        //             signature: data.signature,// 必填，签名，见附录1
        //             jsApiList: [
        //                 'checkJsApi',
        //                 'onMenuShareTimeline',
        //                 'onMenuShareAppMessage',
        //                 'onMenuShareQQ',
        //                 'onMenuShareWeibo',
        //                 'chooseWXPay'
        //             ] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2
        //         });
        //
        //         // 分享给朋友、QQ、微博
        //         var shareData = {
        //             "imgUrl": '',
        //             "title": '测试分析',
        //             "desc": '测试描述',
        //             'link': 'http://www.baidu.com'
        //         };
        //         // 分享到朋友圈
        //         var shareToTimeline = {
        //             "imgUrl": '',
        //             "title": '测试分析',
        //             'link': '测试描述',
        //             "desc": 'http://www.baidu.com'
        //         }
        //
        //         wx.ready(function() {
        //             wx.onMenuShareTimeline(shareToTimeline);
        //             wx.onMenuShareAppMessage(shareData);
        //             wx.onMenuShareQQ(shareData);
        //             wx.onMenuShareQZone(shareData);
        //
        //             wx.error(function(res) {
        //                 alert(res.errMsg);
        //             });
        //         });
        //     }
        // })
    });
    $(window).scroll(function () {
        var scrollTop = $(this).scrollTop();
        var scrollHeight = $(document).height();
        var scrollHeight = $(document).height();
        var windowHeight = $(this).height();
        if (scrollTop + windowHeight >= (scrollHeight - 100)) {
            console.log("到达了底部..")
            findPage();
        }
    });

    function findPage() {
        $.ajax({
            url: '/jewel/page/index',
            type: 'GET', //GET
            async: true,    //或false,是否异步
            timeout: 5000,    //超时时间
            dataType: 'json',    //返回的数据格式：json/xml/html/script/jsonp/text
            success: function (data, textStatus, jqXHR) {
                console.log(data)
                add(data)
                console.log(textStatus)
                console.log(jqXHR)
            }
        })
    }

</script>

</html>